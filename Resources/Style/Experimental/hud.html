<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <script type="text/ecmascript" encoding="utf-8" src="%lunettes_style_root%/base.js"></script>
	<script type="text/ecmascript" encoding="utf-8" src="dom-drag.js"></script>
	<script type="text/ecmascript" encoding="utf-8" src="hud.js"></script>
    <script type="text/ecmascript" encoding="utf-8" src="playlist.js"></script>
	<link id="style" rel="stylesheet" type="text/css" href="hud.css" />
    <style>


    #more {
        -webkit-perspective: 1000;
        -webkit-perspective-origin-x: 0%;
        -webkit-perspective-origin-y: 50%;
        position: absolute;
        top: 40px; bottom: auto; right: 20px; left: auto;
        height: 400px;;
        width: 300px;
    }
    .textcontent {
        display: block;
        position: absolute;
        top: 40px; bottom: auto; right: 20px; left: auto;
        height: 400px;
        width: 300px;
        overflow: hidden;
        background-color: rgba(50, 50, 50, 0.8);
        -webkit-border-radius: 10px;
        -webkit-box-shadow: 0px 5px 30px black;
        -webkit-transform: rotateY(-45deg);
        -webkit-transform-origin: 200px 0 0;
        -webkit-transform-style: preserve-3d;

        border: 1px solid rgba(0,0,0,0.4);
    }

    #content>.hidden .textcontent {
        right: -500px;
        opacity: 0;
        -webkit-transition: all 0.3s ease-in-out;
    }

    .textcontent {
        right: 20px;
        opacity: 1;
        -webkit-transition: all 0.3s ease-in-out;
    }

    .overlay-top {
        position: absolute;
        top: 0px; bottom: auto; right: 0px; left: 0px;
        height: 200px;
        background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(black), color-stop(0.8, rgba(0,0,0,0)), to(rgba(0,0,0,0)));
        -webkit-border-radius: 10px;
    }
    .overlay-bottom {
        position: absolute;
        top: auto; bottom: 0px; right: 0px; left: 0px;
        height: 200px;
        background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(rgba(0,0,0,0)), color-stop(0.2, rgba(0,0,0,0)), to(black));
        -webkit-border-radius: 10px;
    }

    ul {
        position: absolute;
        -webkit-transition: top 0.3s ease-out;
        top: 175px; bottom: auto; right: 0px; left: auto;
        list-style-type: none;
        width: 100%;
    }

    ul li {
        color: #ababab;
        font-family: Lucida Grande;
        font-size: 20px;
        font-weight: bold;
        text-align: center;
        overflow: hidden;
        text-overflow: ellipsis;
        height: 25px;
        -webkit-transition: all 0.3s ease-out;

    }

    ul li.selected {
        color: white;
        -webkit-text-stroke: 0px; 
        text-shadow: 0px 0px 3px black;
        font-size: 35px;
        height: 40px;
        -webkit-transition: all 0.2s ease-out;
    }


    /* If there is only one element don't show the playlist */
    .textcontent {
        display: none;
    }

    .multiple-play-items .textcontent {
        display: block;
    }

    /* Animate between the hidden and the visible state */
    .hidden .playlist-selection {
        opacity: 0;
        -webkit-transition: opacity 0.3s ease-in-out;
    }
    .playlist-selection {
        opacity: 1;
        -webkit-transition: opacity 0.3s ease-in-out;
    }

    .playlist-selection {
        position: absolute;
        margin: 20px;
        top: 0; bottom: auto; right: 0; left: auto;

        border: 2px solid rgba(255, 255, 255, 0.7);
        -webkit-box-shadow:  0px 0px 5px rgba(100, 100, 250, 1);
        height: 116px;
        width: 1000px;
        padding: 20px;
        -webkit-transition: top 0.3s ease-out;
    
        background-color: rgba(255, 255, 255, 0);
        background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, from(rgba(255, 255, 255, 0.3)), color-stop(0.5, rgba(255, 255, 255, 0)), to(rgba(0, 0, 0, 0.5)));
    }
    </style>
    <script>
    var selectionIndex = 0;
    var timer = null;
    function removeCurrentSelection() {
        var item = document.getElementById("tableItem" + selectionIndex);
        removeClassNameFromElement(item, "selected");

    }
    function gotoCurrentSelection() {
        if (selectionIndex < 0)
            selectionIndex = 0;

        var item = document.getElementById("tableItem" + selectionIndex);
        var playlist = document.getElementById("playlist");
        if (!item) {
            selectionIndex--;
            if (selectionIndex > 0)
                gotoCurrentSelection();
            else
                selectionIndex = 0;
            return;
        }

        addClassNameToElement(item, "selected");
    
        if (timer)
            clearTimeout(timer);
        timer = setTimeout(function (){playlist.style.top = - (selectionIndex - 7) * (25) + "px"; timer = null;}, 0);

    }

    var hideTimer = null;
    function hidePlaylist() {
        var elmt = document.getElementById("more");
        addClassNameToElement(elmt, "hidden");
        hideTimer = null;
    }

    function onKeyDown(event) {
        
        var elmt = document.getElementById("more");
        removeClassNameFromElement(elmt, "hidden");

        if (hideTimer)
            clearTimeout(hideTimer);

        hideTimer = setTimeout(function () { hidePlaylist(); }, 1000);
    
        switch (event.keyCode) {
            case 40: // Up
                removeCurrentSelection();
                selectionIndex++;
                gotoCurrentSelection();
                break;
            case 38: // Down
                removeCurrentSelection();
                selectionIndex--;
                gotoCurrentSelection();
                break;
            case 13: // Enter
                window.PlatformView.playMediaAtIndex_(selectionIndex);
                addClassNameToElement(elmt, "hidden");
                break;
            case 00: // Escape
                break;
        }
    }
    function init() {
        initPlaylist();
        HUDController.init();
        windowController.init();
    }
    </script>
	<title>Video Window</title>
</head>
<body  id="content" class="key-window hidden" onkeydown="onKeyDown(event)" onload="init()" ondblclick="windowController.leaveFullscreen()">

<div id="draggable-controls" class="autohide-when-mouse-leaves dont-hide-when-mouse-is-inside draggable"> <!-- Be hidden by default -->
    <div class="controls">
        <div id="title" class="title">Movie title</div>
        <div class="timeinfo">
            <div class="ellapsed-time">--:--</div>
            <input id="timeline" type="range" class="timeline" max="1000" value="0">
            <div class="remaining-time">--:--</div>
        </div>
        <button class="leave-fullscreen"></button>
        <button class="toggle-playing"></button>
    </div>
    <div class="preloader"></div>
</div>

<div id="more" class="hidden">
    <div class="textcontent">
        <ul id="playlist" class="playlist">
        </ul>
        <div class="overlay-top"></div>
        <div class="overlay-bottom"></div>
    </div>
</div>

</body>
</html>
